<ng-template #modalContent let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4>Medication</h4>
    <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
      <app-medication [medications]="meds"></app-medication>
  </div>
</ng-template>
<table class="table">
  <thead>
  <tr>
    <th scope="col" width="70%">Prescription</th>
    <th scope="col">Status</th>
    <th scope="col">Start</th>
    <th scope="col" width="5%"></th>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let medication of medicationRequests">
    <td>
      <div *ngIf="medication.medicationCodeableConcept !=undefined" ngbTooltip="{{getCodeSystem(medication.medicationCodeableConcept.coding[0].system)}} {{medication.medicationCodeableConcept.coding[0].code}}">
        <b *ngIf="medication.medicationCodeableConcept !=undefined">{{medication.medicationCodeableConcept.coding[0].display}}</b>
        <a (click)="getSNOMEDLink(medication.medicationCodeableConcept.coding[0])"><span class="fa fa-book"></span></a>
        <a (click)="getDMDLink(medication.medicationCodeableConcept.coding[0])"><span class="fa fa-bookmark"></span></a>
      </div>
      <span *ngIf="medication.medicationReference !=undefined">
          <b>{{medication.medicationReference.display}}</b>
          <span *ngIf="showDetail">
          <a (click)="onClick(modalContent, medication)"> <span class="badge badge-info">medication</span></a>
          </span>
      </span>
      <br>
      <span *ngFor="let dosage of medication.dosageInstruction"> <i>DOSE</i>
            <span *ngIf="dosage.doseQuantity!=undefined">{{dosage.doseQuantity.value}} {{dosage.doseQuantity.unit}}</span>
          - <span *ngIf="dosage.route!=undefined && dosage.route.coding.length>0">
              <a (click)="getSNOMEDLink(dosage.route.coding[0])"><span class="badge badge-light">route</span></a>
              {{dosage.route.coding[0].display}}
            </span> -
            <span *ngIf="dosage.maxDosePerPeriod != undefined">
               <a (click)="getSNOMEDLink(dosage.maxDosePerPeriod.numerator)"><span class="badge badge-light">form</span></a>
              {{dosage.maxDosePerPeriod.numerator.value}}
             {{dosage.maxDosePerPeriod.numerator.unit}} {{dosage.maxDosePerPeriod.denominator.value}}{{dosage.maxDosePerPeriod.denominator.code}}
            </span>
            <span *ngIf="dosage.asNeededBoolean"> as required</span>
        </span>
    </td>
    <td>
      {{medication.status}}
    </td>
    <td>
      {{medication.authoredOn | date: 'dd-MMM-yyyy'}}
    </td>
    <td>
      <a (click)="select(medication)">
        <span class="fa fa-arrow-right"></span>
      </a>
    </td>
  </tr>
  </tbody>
</table>
